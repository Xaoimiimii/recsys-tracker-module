<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecSys SDK - Click Tracking Test (Fixed)</title>
    
    <script>window.__RECSYS_DOMAIN_KEY__ = "079251187f351b700844164bf0ac5fddebaa305af8732fe06ae631b921eaf9e7";</script>
    <script src="../dist/loader.js"></script>

    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f7f9; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        ._song-row_hjtft_317 { padding: 15px; border-bottom: 1px solid #eee; cursor: pointer; display: flex; justify-content: space-between; }
        ._song-row_hjtft_317:hover { background: #f0f0f0; }
        ._song-title-text { font-weight: bold; color: #1db954; }
        #debug-console { margin-top: 20px; background: #1e1e1e; color: #a6e22e; padding: 15px; border-radius: 5px; height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>

<div class="container">
    <h1>üéµ Click Tracking Test</h1>
    <div class="playlist">
        <div class="_song-row_hjtft_317" data-rfd-draggable-id="SONG-001">
            <span class="_song-title-text">Ch√∫ng Ta C·ªßa Hi·ªán T·∫°i</span>
            <span>5:01</span>
        </div>
        <div class="_song-row_hjtft_317" data-rfd-draggable-id="SONG-002">
            <span class="_song-title-text">Mang Ti·ªÅn V·ªÅ Cho M·∫π</span>
            <span>4:15</span>
        </div>
    </div>

    <div id="debug-console">--- Waiting for Force Start... ---</div>
</div>

<script>
    window.LoginDetector = { getCurrentUser: () => "User_Test_66" };

    const debugBox = document.getElementById('debug-console');
    const logToScreen = (msg) => {
        const div = document.createElement('div');
        div.innerHTML = `[${new Date().toLocaleTimeString()}] ${msg}`;
        debugBox.prepend(div);
    };

    const originalLog = console.log;
    console.log = function(...args) {
        originalLog.apply(console, args);
        try {
            const text = JSON.stringify(args);
            if (text.includes('üéØ') || text.includes('Click') || text.includes('Extracted')) logToScreen("üîç SDK: " + text);
        } catch(e) {}
    };

    window.addEventListener('load', () => {
        logToScreen("‚è≥ Waiting for SDK to auto-initialize via Loader...");
        
        // We no longer manually init the plugin or mock tracker
        // The loader.js should fetch config from server -> init Tracker -> init Plugins
        
        setTimeout(() => {
            logToScreen("‚Ñπ You can click elements now to test tracking.");
        }, 2000);
    });
</script>

</body>
</html>